async function verValor() {
  const bairroInput = document.getElementById("bairroInput").value.trim();
  const quantidade = parseInt(document.getElementById("quantidadeInput").value) || 1;
  const tipo = document.getElementById("tipoRastreador").value;
  const popup = document.getElementById("popup");
  const mensalidadeBox = document.getElementById("mensalidadeBox");
  const beneficiosBox = document.getElementById("beneficiosBox");
  const whatsapp = document.getElementById("whatsapp");
  const duvidas = document.getElementById("duvidas");

  // âœ… Caminho certo se o JSON estiver na pasta public/
  const response = await fetch("/bairros-rj.json");

  const data = await response.json();

  const normalizar = str =>
    str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().replace(/\s+/g, " ").trim();

  const resultado = data.find(entry => normalizar(entry.bairro) === normalizar(bairroInput));

  popup.style.display = "block";
  whatsapp.style.display = "block";
  duvidas.style.display = "block";
  mensalidadeBox.style.display = "block";
  beneficiosBox.style.display = "block";

  if (resultado) {
    const valorInstalacao = parseFloat(resultado.valor.replace(",", ".")) * quantidade;
    popup.className = "sucesso";
    popup.innerHTML = `âœ… Valor total da instalaÃ§Ã£o: R$ ${valorInstalacao.toFixed(2).replace(".", ",")}`;

    if (tipo === "com") {
      const cheio = 54.90 * quantidade;
      const desconto = 49.90 * quantidade;
      mensalidadeBox.className = "sucesso";
      mensalidadeBox.innerHTML = `
        ğŸ“… Mensalidade: R$ ${cheio.toFixed(2).replace(".", ",")}<br>
        Pagando atÃ© a data do vencimento, vocÃª ganha um desconto:<br>
        <strong>R$ ${desconto.toFixed(2).replace(".", ",")} mensais</strong>
      `;
      beneficiosBox.className = "sucesso";
      beneficiosBox.innerHTML = `
        âœ¨ BenefÃ­cios que vocÃª vai ter com a Rastreando GPS:<br><br>
        âœ… LOCALIZAÃ‡ÃƒO em tempo real<br>
        âš ï¸ ALERTAS de igniÃ§Ã£o<br>
        ğŸ”’ BLOQUEIO e DESBLOQUEIO remoto<br>
        ğŸ›£ï¸ HISTÃ“RICO de rotas e VELOCIDADE<br>
        ğŸ“± ACESSO pelo celular e computador<br>
        ğŸ™‹â€â™‚ï¸ SUPORTE humano rÃ¡pido e atencioso<br><br>
        ğŸš˜ SEGURANÃ‡A, praticidade e controle em um sÃ³ lugar!<br><br>
        Clique no botÃ£o abaixo e agende logo sua instalaÃ§Ã£o ğŸ‘‡
      `;
    } else {
      const valorMensal = 39.90 * quantidade;
      mensalidadeBox.className = "sucesso";
      mensalidadeBox.innerHTML = `ğŸ“… Mensalidade: <strong>R$ ${valorMensal.toFixed(2).replace(".", ",")} mensais</strong>`;
      beneficiosBox.className = "sucesso";
      beneficiosBox.innerHTML = `
        âœ¨ BenefÃ­cios que vocÃª vai ter com a Rastreando GPS:<br><br>
        âœ… LOCALIZAÃ‡ÃƒO em tempo real<br>
        âš ï¸ ALERTAS de igniÃ§Ã£o<br>
        ğŸ›£ï¸ HISTÃ“RICO de rotas e VELOCIDADE<br>
        ğŸ“± ACESSO pelo celular e computador<br>
        ğŸ™‹â€â™‚ï¸ SUPORTE humano rÃ¡pido e atencioso<br><br>
        ğŸš˜ SEGURANÃ‡A, praticidade e controle em um sÃ³ lugar!<br><br>
        Clique no botÃ£o abaixo e agende logo sua instalaÃ§Ã£o ğŸ‘‡
      `;
    }
  } else {
    popup.className = "erro";
    popup.innerHTML = `âŒ Este bairro nÃ£o foi encontrado.<br>ğŸ“Œ Verifique se vocÃª digitou corretamente o nome do bairro.`;
    mensalidadeBox.style.display = "none";
    beneficiosBox.style.display = "none";
  }
}
